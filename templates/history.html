{{define "history"}}
<div class="space-y-6">
  <!-- Page Header -->
  <div>
    <h2 class="text-3xl font-bold text-gray-900">History</h2>
    <p class="text-gray-600 mt-1">View all your purchases and daily readings</p>
  </div>

  <!-- Purchase History Table -->
  <div class="bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden">
    <div class="px-6 py-4 border-b border-gray-200">
      <h3 class="text-lg font-semibold text-gray-900">Purchase History</h3>
    </div>
    <div class="overflow-x-auto">
      <table class="w-full">
        <thead class="bg-gray-50">
          <tr>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">kWh Purchased
            </th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cost</th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          {{range .Purchases}}
          <tr class="hover:bg-gray-50">
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{.DateString}} {{formatTime .Timestamp}}
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{.Kwh}} kWh</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{.Cost}}</td>
          </tr>
          {{else}}
          <tr>
            <td colspan="3" class="px-6 py-8 text-center text-gray-500">No purchases recorded yet</td>
          </tr>
          {{end}}
        </tbody>
      </table>
    </div>
  </div>

  <!-- Daily Readings Table -->
  <div class="bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden">
    <div class="px-6 py-4 border-b border-gray-200">
      <h3 class="text-lg font-semibold text-gray-900">Daily Readings</h3>
    </div>
    <div class="overflow-x-auto">
      <table class="w-full">
        <thead class="bg-gray-50">
          <tr>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">kWh Remaining
            </th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          {{range .Readings}}
          <tr class="hover:bg-gray-50">
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{.DateString}} {{formatTime .Timestamp}}
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{.Kwh}} kWh</td>
          </tr>
          {{else}}
          <tr>
            <td colspan="2" class="px-6 py-8 text-center text-gray-500">No readings recorded yet</td>
          </tr>
          {{end}}
        </tbody>
      </table>
    </div>
  </div>
</div>
{{end}}
